import{_ as A,t as D,r as u,k as S,h as N,d as P,o as r,c as d,a as e,w as g,v as b,e as M,l as B,F as I,m as C,i as m,g as L}from"./index.01a0bfa1.js";import{M as O,i as z,a as k}from"./infoModal.017bd5a8.js";const E={props:{currentItem:{type:Object,default:()=>{}},isNew:{type:Boolean,default:!1}},setup(v,{emit:o}){const{currentItem:f,isNew:t}=D(v),i={title:"",category:"",rating:0,description:"",price:0,num:0,origin_price:0,imagesUrl:[],imageUrl:"",is_enabled:0},n=u(0),c=u({}),s=u(!1);function p(){}const x=u(null),a=u(null);function h(){a.value.show()}function j(){a.value.hide()}function U(_){t.value?(o("add-product",_),c.value={...i}):(o("update-product",_),c.value={...i})}return S(()=>{t.value?c.value={...i}:c.value={...f.value}}),N(()=>{a.value=new O(x.value)}),{tempProduct:c,uploadImg:p,imgUploadLoading:s,modal:x,openModal:h,hideModal:j,confirm:U,rating:n}}},F={class:"modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto",id:"exampleModalCenteredScrollable",tabindex:"-1","aria-labelledby":"exampleModalCenteredScrollable","aria-modal":"true",role:"dialog",ref:"modal"},H={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable relative w-auto pointer-events-none"},T={class:"modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current"},R={class:"modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md"},q={class:"text-xl font-medium leading-normal text-gray-800",id:"exampleModalCenteredScrollableLabel"},G={key:0},J={key:1},K=e("button",{type:"button",class:"btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Q={class:"modal-body relative p-4"},W={class:"grid grid-cols-12 gap-4"},X={class:"col-span-4 flex justify-center"},Y={class:"mb-3 xl:w-96"},Z=e("label",{for:"imgUrl",class:"form-label inline-block mb-2 text-gray-700"},"\u8F38\u5165\u5716\u7247\u7DB2\u5740",-1),$=["src","alt"],ee={class:"col-span-8"},te={class:"flex justify-center"},oe={class:"mb-3 xl:w-96"},se=e("label",{for:"title",class:"form-label inline-block mb-2 text-gray-700"},"\u6A19\u984C",-1),ne={class:"grid grid-cols-2 gap-4"},le={class:"flex justify-center"},ae={class:"mb-3 xl:w-96"},ie=e("label",{for:"title",class:"form-label inline-block mb-2 text-gray-700"},"\u8A55\u5206",-1),re={class:"flex justify-center"},de={class:"mb-3 xl:w-96"},ce=e("label",{for:"category",class:"form-label inline-block mb-2 text-gray-700"},"\u5269\u9918",-1),ue={class:"grid grid-cols-2 gap-4"},ge={class:"flex justify-center"},me={class:"mb-3 xl:w-96"},be=e("label",{for:"category",class:"form-label inline-block mb-2 text-gray-700"},"\u5206\u985E",-1),fe={class:"flex justify-center"},pe={class:"mb-3 xl:w-96"},he=e("label",{for:"unit",class:"form-label inline-block mb-2 text-gray-700"},"\u55AE\u4F4D",-1),xe={class:"grid grid-cols-2 gap-4"},_e={class:"flex justify-center"},ye={class:"mb-3 xl:w-96"},ve=e("label",{for:"originPrice",class:"form-label inline-block mb-2 text-gray-700"},"\u539F\u50F9",-1),we={class:"flex justify-center"},ke={class:"mb-3 xl:w-96"},Pe=e("label",{for:"price",class:"form-label inline-block mb-2 text-gray-700"},"\u552E\u50F9",-1),Me=e("hr",null,null,-1),je={class:"flex justify-center"},Ue={class:"mb-3 xl:w-96"},Ie=e("label",{for:"briefDescription",class:"form-label inline-block mb-2 text-gray-700"},"\u666F\u9EDE\u7C21\u8FF0",-1),Ce={class:"flex justify-center"},Ae={class:"mb-3 xl:w-96"},Ne=e("label",{for:"description",class:"form-label inline-block mb-2 text-gray-700"},"\u666F\u9EDE\u8AAA\u660E",-1),Ve={class:"flex"},De={class:"form-check form-switch"},Se=e("label",{class:"form-check-label inline-block text-gray-800",for:"activate"},"\u662F\u5426\u555F\u7528",-1),Be={class:"modal-footer flex flex-shrink-0 flex-wrap items-center justify-end p-4 border-t border-gray-200 rounded-b-md"},Le=e("button",{type:"button",class:"inline-block px-6 py-2.5 bg-gray-400 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-purple-700 hover:shadow-lg focus:bg-purple-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-purple-800 active:shadow-lg transition duration-150 ease-in-out","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1);function Oe(v,o,f,t,i,n){const c=P("star-rating");return r(),d("div",null,[e("div",F,[e("div",H,[e("div",T,[e("div",R,[e("h5",q,[f.isNew?(r(),d("span",G,"\u65B0\u589E\u7522\u54C1")):(r(),d("span",J,"\u7DE8\u8F2F\u7522\u54C1"))]),K]),e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[Z,g(e("input",{type:"url",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"imgUrl","onUpdate:modelValue":o[0]||(o[0]=s=>t.tempProduct.imageUrl=s),placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u7DB2\u5740"},null,512),[[b,t.tempProduct.imageUrl]]),e("img",{class:"w-full h-auto block mt-2",src:t.tempProduct.imageUrl,alt:t.tempProduct.imageUrl},null,8,$)])]),e("div",ee,[e("div",te,[e("div",oe,[se,g(e("input",{type:"text",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"title","onUpdate:modelValue":o[1]||(o[1]=s=>t.tempProduct.title=s),placeholder:"\u8ACB\u8F38\u5165\u6A19\u984C"},null,512),[[b,t.tempProduct.title]])])]),e("div",ne,[e("div",le,[e("div",ae,[ie,M(c,{"star-size":"20",animate:"true",increment:"0.5",rating:t.tempProduct.rating,"onUpdate:rating":o[2]||(o[2]=s=>t.tempProduct.rating=s)},null,8,["rating"])])]),e("div",re,[e("div",de,[ce,g(e("input",{type:"text",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"category","onUpdate:modelValue":o[3]||(o[3]=s=>t.tempProduct.num=s),placeholder:"\u8ACB\u8F38\u5165\u5269\u9918\u6578\u91CF",min:"0"},null,512),[[b,t.tempProduct.num]])])])]),e("div",ue,[e("div",ge,[e("div",me,[be,g(e("input",{type:"text",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"category","onUpdate:modelValue":o[4]||(o[4]=s=>t.tempProduct.category=s),placeholder:"\u8ACB\u8F38\u5165\u5206\u985E"},null,512),[[b,t.tempProduct.category]])])]),e("div",fe,[e("div",pe,[he,g(e("input",{type:"text",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"unit","onUpdate:modelValue":o[5]||(o[5]=s=>t.tempProduct.unit=s),placeholder:"\u8ACB\u8F38\u5165\u55AE\u4F4D"},null,512),[[b,t.tempProduct.unit]])])])]),e("div",xe,[e("div",_e,[e("div",ye,[ve,g(e("input",{type:"number",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"originPrice","onUpdate:modelValue":o[6]||(o[6]=s=>t.tempProduct.origin_price=s),placeholder:"\u8ACB\u8F38\u5165\u539F\u50F9",min:"0"},null,512),[[b,t.tempProduct.origin_price,void 0,{number:!0}]])])]),e("div",we,[e("div",ke,[Pe,g(e("input",{type:"number",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"price","onUpdate:modelValue":o[7]||(o[7]=s=>t.tempProduct.price=s),placeholder:"\u8ACB\u8F38\u5165\u552E\u50F9",min:"0"},null,512),[[b,t.tempProduct.price]])])])]),Me,e("div",je,[e("div",Ue,[Ie,g(e("textarea",{class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"briefDescription",rows:"3","onUpdate:modelValue":o[8]||(o[8]=s=>t.tempProduct.description=s),placeholder:"\u8ACB\u8F38\u5165\u666F\u9EDE\u7C21\u8FF0"},null,512),[[b,t.tempProduct.description]])])]),e("div",Ce,[e("div",Ae,[Ne,g(e("textarea",{class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"description",rows:"3","onUpdate:modelValue":o[9]||(o[9]=s=>t.tempProduct.content=s),placeholder:"\u8ACB\u8F38\u5165\u666F\u9EDE\u8AAA\u660E"},null,512),[[b,t.tempProduct.content]])])]),e("div",Ve,[e("div",De,[g(e("input",{class:"form-check-input appearance-none w-9 -ml-10 rounded-full float-left h-5 align-top bg-white bg-no-repeat bg-contain bg-gray-300 focus:outline-none cursor-pointer shadow-sm",type:"checkbox",role:"switch","onUpdate:modelValue":o[10]||(o[10]=s=>t.tempProduct.is_enabled=s),"true-value":1,"false-value":0,id:"activate"},null,512),[[B,t.tempProduct.is_enabled]]),Se])])])])]),e("div",Be,[Le,e("button",{type:"button",class:"inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out ml-1",onClick:o[11]||(o[11]=s=>t.confirm(t.tempProduct))}," \u78BA\u8A8D ")])])])],512)])}const ze=A(E,[["render",Oe]]),Ee={components:{editModal:ze,infoModal:z},setup(){const v=u([]),o=u({}),f=u(!1);function t(l){o.value=l}const i=u(null),n=u({title:"\u63D0\u793A",message:"",status:""});function c(l){o.value=l,n.value.title="\u522A\u9664\u63D0\u793A",n.value.message="\u8ACB\u78BA\u8A8D\u662F\u5426\u8981\u522A\u9664!",n.value.status="delete",i.value.openModal()}function s(){i.value.hideModal(),n.value.title="\u63D0\u793A",n.value.message="",n.value.status=""}const p=u(null);function x(l){o.value=l,f.value=!1,p.value.openModal()}function a(){p.value.hideModal()}function h(){f.value=!0,p.value.openModal()}async function j(l){const{id:y}=l,w=await k.editAdminProduct(y,l);w.success?(a(),n.value.message=w.message,i.value.openModal(),_()):(typeof w.response.data.message=="string"?n.value.message=w.response.data.message:n.value.message=w.response.data.message.join(", "),i.value.openModal())}async function U(l){const y=await k.addAdminProduct(l);y.success?(a(),n.value.message=y.message,i.value.openModal(),_()):(typeof y.response.data.message=="string"?n.value.message=y.response.data.message:n.value.message=y.response.data.message.join(", "),i.value.openModal())}async function _(){const l=await k.getAdminProducts();l.success?v.value=l.products:(typeof l.response.data.message=="string"?n.value.message=l.response.data.message:n.value.message=l.response.data.message.join(", "),i.value.openModal())}async function V(){s();const l=await k.deleteAdminProduct(o.value.id);l.success?n.value.message=l.message:typeof l.response.data.message=="string"?n.value.message=l.response.data.message:n.value.message=l.response.data.message.join(", "),i.value.openModal(),_()}return N(()=>{_()}),{data:v,currentItem:o,check:t,modal:p,infoModal:i,messageContent:n,openModal:x,hideModal:a,openNewModal:h,openDeleteModal:c,hideInfoModal:s,isNew:f,editAdminProduct:j,addAdminProduct:U,deleteAdminProduct:V}}},Fe={class:"grid gap-2 grid-cols-1 xl:grid-cols-2"},He={class:"flex flex-col mb-8 xl:mb-0"},Te={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Re={class:"py-4 inline-block min-w-full sm:px-6 lg:px-8"},qe={class:"flex justify-end mb-5"},Ge={class:"overflow-hidden border border-solid border-gray-300"},Je={class:"min-w-full text-center"},Ke=e("thead",{class:"border-b bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u7522\u54C1\u540D\u7A31 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u539F\u50F9 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u552E\u50F9 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u662F\u5426\u555F\u7528 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u67E5\u770B\u7D30\u7BC0 ")])],-1),Qe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},We={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Xe={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Ye={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Ze={class:"flex justify-center"},$e={class:"form-check form-switch"},et=["checked"],tt=e("label",{class:"form-check-label inline-block text-gray-800",for:"flexSwitchCheckDefault"},null,-1),ot={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},st={class:"flex items-center justify-center"},nt={class:"inline-flex shadow-md hover:shadow-lg focus:shadow-lg",role:"group"},lt=["onClick"],at=["onClick"],it=["onClick"],rt={class:"font-semibold"},dt=e("h2",{class:"text-4xl mb-5 font-bold"},"\u8A73\u60C5\u5982\u4E0B",-1),ct={key:0,class:"flex justify-center"},ut={class:"flex flex-col md:flex-row rounded-lg bg-white shadow-lg"},gt=["src","alt"],mt={class:"p-6 flex flex-col justify-start"},bt={class:"text-gray-900 text-xl font-medium mb-2"},ft={class:"text-gray-700 text-base mb-2"},pt={class:"text-gray-700 text-base mb-2"},ht={class:"text-gray-700 text-base mb-4"},xt={class:"text-gray-600 text-xs"},_t={key:0,class:"grid gap-1 grid-rows-1 grid-cols-3 shadow-lg"},yt=["src","alt"],vt={key:1},wt={key:1,class:"text-gray-600"};function kt(v,o,f,t,i,n){var x;const c=P("star-rating"),s=P("editModal"),p=P("infoModal");return r(),d("main",null,[e("div",Fe,[e("div",He,[e("div",Te,[e("div",Re,[e("div",qe,[e("button",{type:"button",class:"inline-block px-6 py-2 border-2 border-gray-800 text-gray-800 font-medium text-xs leading-tight uppercase rounded hover:bg-black hover:bg-opacity-5 focus:outline-none focus:ring-0 transition duration-150 ease-in-out font-bold",onClick:o[0]||(o[0]=(...a)=>t.openNewModal&&t.openNewModal(...a))},"\u65B0\u589E\u7522\u54C1")]),e("div",Ge,[e("table",Je,[Ke,e("tbody",null,[(r(!0),d(I,null,C(t.data,a=>(r(),d("tr",{class:"bg-white border-b",key:a.id},[e("td",Qe,m(a.title),1),e("td",We,m(a.origin_price),1),e("td",Xe,m(a.price),1),e("td",Ye,[e("div",Ze,[e("div",$e,[e("input",{class:"form-check-input appearance-none w-9 -ml-10 rounded-full float-left h-5 align-top bg-white bg-no-repeat bg-contain bg-gray-300 focus:outline-none cursor-pointer shadow-sm",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",checked:a.is_enabled===1},null,8,et),tt])])]),e("td",ot,[e("div",st,[e("div",nt,[e("button",{type:"button",class:"rounded-l inline-block px-4 py-1.5 bg-gray-800 text-white font-medium text-xs leading-tight uppercase hover:bg-gray-900 focus:bg-gray-900 focus:outline-none focus:ring-0 active:bg-gray-900 transition duration-150 ease-in-out",onClick:h=>t.check(a)},"\u67E5\u770B",8,lt),e("button",{type:"button",class:"inline-block px-4 py-1.5 bg-gray-800 text-white font-medium text-xs leading-tight uppercase hover:bg-gray-900 focus:bg-gray-900 focus:outline-none focus:ring-0 active:bg-gray-900 transition duration-150 ease-in-out",onClick:h=>t.openModal(a)},"\u7DE8\u8F2F",8,at),e("button",{type:"button",class:"rounded-r inline-block px-4 py-1.5 bg-gray-800 text-white font-medium text-xs leading-tight uppercase hover:bg-gray-900 focus:bg-gray-900 focus:outline-none focus:ring-0 active:bg-gray-900 transition duration-150 ease-in-out",onClick:h=>t.openDeleteModal(a)},"\u522A\u9664",8,it)])])])]))),128))])])])])]),e("p",rt,"\u76EE\u524D\u6709\u7522\u54C1 "+m(Object.keys(t.data).length)+" \u9805",1)]),e("div",null,[dt,Object.keys(t.currentItem).length>0?(r(),d("div",ct,[e("div",ut,[e("img",{class:"w-full h-96 md:h-auto object-cover md:w-48 rounded-t-lg md:rounded-none md:rounded-l-lg",src:t.currentItem.imageUrl,alt:t.currentItem.title},null,8,gt),e("div",mt,[e("h5",bt,m(t.currentItem.title),1),e("div",ft,[M(c,{"star-size":"20",animate:"true",increment:"0.5","read-only":"true",rating:t.currentItem.rating?t.currentItem.rating:0},null,8,["rating"])]),e("p",pt,m(t.currentItem.category),1),e("p",ht,m(t.currentItem.description),1),e("p",null,[L(m(t.currentItem.price)+"/"+m(t.currentItem.unit)+" ",1),e("span",xt,"\u9084\u5269"+m(t.currentItem.num)+"\u500B",1)]),(x=t.currentItem.imagesUrl)!=null&&x.length?(r(),d("div",_t,[(r(!0),d(I,null,C(t.currentItem.imagesUrl,(a,h)=>(r(),d("img",{key:h,class:"h-40 w-40 block object-cover",src:a,alt:a},null,8,yt))),128))])):(r(),d("div",vt))])])])):(r(),d("p",wt,"\u8ACB\u9078\u64C7\u55AE\u4E00\u7522\u54C1\u67E5\u770B"))])]),M(s,{ref:"modal",currentItem:t.currentItem,isNew:t.isNew,onUpdateProduct:t.editAdminProduct,onAddProduct:t.addAdminProduct},null,8,["currentItem","isNew","onUpdateProduct","onAddProduct"]),M(p,{ref:"infoModal",content:t.messageContent,onDeleteProduct:t.deleteAdminProduct,onHideModal:t.hideInfoModal},null,8,["content","onDeleteProduct","onHideModal"])])}const jt=A(Ee,[["render",kt]]);export{jt as default};
